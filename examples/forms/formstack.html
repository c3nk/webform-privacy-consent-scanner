<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Test – Formstack Forms (mock/live)</title>
  <meta name="robots" content="noindex,nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,Arial;max-width:760px;margin:40px auto;padding:0 16px}
    iframe{width:100%;height:600px;border:0;margin:20px 0}
    code{background:#f5f5f5;padding:2px 6px;border-radius:6px}
    .formstack-form{border:1px solid #ddd;padding:20px;margin:20px 0;border-radius:8px}
    .formstack-field{margin:10px 0}
  </style>
</head>
<body>
  <h1>Formstack Forms – Test</h1>
  <p>Params: <code>?cmp=cookiebot|onetrust|efilli</code>, <code>&mode=mock|live</code> (default: mock)</p>

  <!-- Formstack Hosted Form (URL pattern detection) -->
  <h2>Formstack Hosted Form</h2>
  <div id="formstack-iframe-container"></div>

  <!-- Formstack Embed Script Container -->
  <h2>Formstack Embed Script</h2>
  <div id="formstack-script-container"></div>

  <!-- Formstack Static Script -->
  <h2>Formstack Static Script</h2>
  <div id="formstack-static-container"></div>

  <!-- Formstack JavaScript API -->
  <script>
    (function(){
      const qs = new URLSearchParams(location.search);
      const cmp = (qs.get('cmp')||'').toLowerCase();
      const mode = (qs.get('mode')||'mock').toLowerCase();
      const head = document.head;

      function addScript(src, attrs = {}, executable = true){
        const s = document.createElement('script');
        s.async = false;
        if (executable) { s.src = src; }
        else { s.type = 'application/json'; s.textContent = src; }
        Object.entries(attrs).forEach(([k,v]) => s.setAttribute(k,v));
        head.appendChild(s);
      }

      // Formstack iframe signature
      const iframeContainer = document.getElementById('formstack-iframe-container');
      if (mode === 'live') {
        const iframe = document.createElement('iframe');
        iframe.src = 'https://mycompany.formstack.com/forms/contact_form';
        iframe.width = '100%';
        iframe.height = '400';
        iframe.frameBorder = '0';
        iframe.title = 'Contact Form';
        iframeContainer.appendChild(iframe);
      } else {
        const sig = document.createElement('script');
        sig.type = 'application/json';
        sig.textContent = 'https://mycompany.formstack.com/forms/contact_form';
        iframeContainer.appendChild(sig);
      }

      // Formstack embed script signature
      if (mode === 'live') {
        addScript('https://mycompany.formstack.com/forms/js.php?form=contact_form&view=js&action=embed');
      } else {
        addScript('https://mycompany.formstack.com/forms/js.php?form=contact_form&view=js&action=embed', {}, false);
        document.getElementById('formstack-script-container').innerHTML = '<p><em>(Mock) Formstack embed script loaded.</em></p>';
      }

      // Formstack static script signature
      if (mode === 'live') {
        addScript('https://static.formstack.com/forms/js/contact_form.js');
      } else {
        addScript('https://static.formstack.com/forms/js/contact_form.js', {}, false);
        document.getElementById('formstack-static-container').innerHTML = '<p><em>(Mock) Formstack static script loaded.</em></p>';
      }

      // Formstack JavaScript API signatures
      if (mode === 'live') {
        window.addEventListener('load', function(){
          try {
            if (typeof Formstack !== 'undefined') {
              Formstack.init({
                formId: 'contact_form',
                portalId: '12345'
              });
            }
          } catch(e) {}
        });
      } else {
        // Mock signatures
        const apiSig = document.createElement('script');
        apiSig.type = 'application/json';
        apiSig.textContent = 'Formstack.init({formId:"contact_form",portalId:"12345"})';
        head.appendChild(apiSig);

        const formVar = document.createElement('script');
        formVar.type = 'application/json';
        formVar.textContent = 'var fsForm12345 = {formId:"contact_form",portalId:"12345"}';
        head.appendChild(formVar);
      }

      // CMP signatures
      if (cmp === 'cookiebot') {
        if (mode === 'live') {
          addScript('https://consent.cookiebot.com/uc.js', { id:'Cookiebot','data-cbid':'00000000-0000-0000-0000-000000000000', type:'text/javascript' });
        } else {
          addScript('https://consent.cookiebot.com/uc.js data-cbid=00000000-0000-0000-0000-000000000000', { id:'Cookiebot' }, false);
        }
      } else if (cmp === 'onetrust') {
        if (mode === 'live') {
          addScript('https://cdn.cookielaw.org/scripttemplates/otSDKStub.js', { 'data-domain-script':'11111111-1111-1111-1111-111111111111', charset:'UTF-8' });
          window.OptanonWrapper = function(){};
        } else {
          addScript('https://cdn.cookielaw.org/scripttemplates/otSDKStub.js data-domain-script=11111111-1111-1111-1111-111111111111', {}, false);
          const ot = document.createElement('script'); ot.type='application/json'; ot.textContent='OptanonWrapper()'; head.appendChild(ot);
        }
      } else if (cmp === 'efilli') {
        if (mode === 'live') {
          addScript('https://cdn.efilli.com/efilli.js', { 'data-efilli-id':'EFILLI-DEMO-ID' });
        } else {
          addScript('https://cdn.efilli.com/efilli.js data-efilli-id=EFILLI-DEMO-ID', {}, false);
        }
      }
    })();
  </script>

  <!-- Formstack CSS Classes and Data Attributes -->
  <h2>Formstack CSS Classes & Data Attributes</h2>
  <div class="formstack-form" data-formstack-form-id="12345" data-formstack-portal-id="67890">
    <div class="formstack-field">
      <label for="fs-field-1">Sample Form Field</label>
      <input type="text" id="fs-field-1" class="formstack-input" placeholder="Test input" data-formstack-field="text">
    </div>
    <div class="formstack-field">
      <label for="fs-field-2">Email Field</label>
      <input type="email" id="fs-field-2" class="formstack-input formstack-email" placeholder="email@example.com" data-formstack-type="email">
    </div>
    <div class="formstack-field">
      <button type="submit" class="formstack-submit" data-formstack-submit="true">Submit Form</button>
    </div>
  </div>

  <!-- Additional Formstack Signatures -->
  <h2>Additional Formstack Signatures</h2>
  <div data-formstack-embed="true" data-formstack-form-id="embed123">
    <p>Embedded form container with data attributes</p>
  </div>

  <script>
    // Additional mock signatures
    if (document.location.search.includes('mode=mock')) {
      const extraSigs = document.createElement('script');
      extraSigs.type = 'application/json';
      extraSigs.textContent = JSON.stringify({
        formstackSignatures: [
          'data-formstack-portal-id',
          'class="formstack-submit"',
          'fsForm\\d+',
          'Formstack\\.init'
        ]
      });
      document.head.appendChild(extraSigs);
    }
  </script>

<footer>
  <p>
      <a href="https://www.linkedin.com/in/cenkkabahasanoglu/" target="_blank">LinkedIn</a>
      <a href="https://www.instagram.com/cenxanane/" target="_blank">Instagram</a>
      <a href="https://x.com/cenxanane" target="_blank">X</a>
  </p>
  Made with <span style="color: #e25555;">&#9829;</span> in Istanbul
</footer>

</body>
</html>
